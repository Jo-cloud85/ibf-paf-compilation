<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orders Form</title>
    <link rel="stylesheet" 
        href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" 
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" 
        crossorigin="anonymous">
</head>
<body>
    <div class="container pt-5">
        <h2>Create Order</h2>
        <form th:action="@{/order}" method="post">
            <!-- When you use type="date", the value entered by the user will be sent as a string in the format 'yyyy-MM-dd' -->
            <label for="orderDate">Order Date:</label>
            <input type="date" class="form-control" id="orderDate" name="orderDate" required><br><br>
    
            <label for="customerName">Customer Name:</label>
            <input type="text" class="form-control" id="customerName" name="customerName" required><br><br>
    
            <label for="shipAddress">Shipping Address:</label>
            <input type="text" class="form-control" id="shipAddress" name="shipAddress" required><br><br>
    
            <label for="notes">Notes:</label>
            <textarea class="form-control" id="notes" name="notes"></textarea><br><br>
    
            <label for="tax">Tax (%):</label>
            <input class="form-control" type="number" id="tax" name="tax" min="0" step="0.01" value="5"><br><br>
    
            <h3>Order Details</h3>
            <!-- Manually creating order details w/o using Javascript -->
            <!-- <div th:each="i : ${#numbers.sequence(0, 1)}">
                <label for="product">Product:</label>
                <input class="form-control" type="text" id="product[${i}]" name="product"><br>
            
                <label for="unitPrice">Unit Price:</label>
                <input class="form-control" type="number" id="unitPrice[${i}]" name="unitPrice" min="0" step="0.01"><br>
            
                <label for="discount">Discount:</label>
                <input class="form-control" type="number" id="discount[${i}]" name="discount" value="0"><br>
            
                <label for="quantity">Quantity:</label>
                <input class="form-control" type="number" id="quantity[${i}]" name="quantity" min="1"><br>
            </div> -->

            <!-- Dynamically creating order details using Javascript -->
            <div id="orderDetailsContainer">
                <div class="orderDetail">
                    <label for="product">Product:</label>
                    <input class="form-control" type="text" name="product"><br>
                    
                    <label for="unitPrice">Unit Price:</label>
                    <input class="form-control" type="number" name="unitPrice" min="0" step="0.01"><br>
                    
                    <label for="discount">Discount:</label>
                    <input class="form-control" type="number" name="discount" value="0"><br>
                    
                    <label for="quantity">Quantity:</label>
                    <input class="form-control" type="number" name="quantity" min="1"><br>
                </div>
            </div>
            
            <div><button class="btn btn-primary rounded-pill mt-4 px-4 py-2" type="button" onclick="addOrderDetail()">Add Order Detail</button></div>
            <div><button class="btn btn-dark rounded-pill mt-4 px-4 py-2" type="submit">Create Order</button></div>
        </form>
    </div>
</body>
<script>
    function addOrderDetail() {
        var container = document.getElementById('orderDetailsContainer');
        var newOrderDetail = document.createElement('div');
        newOrderDetail.classList.add('orderDetail');
        newOrderDetail.innerHTML = `
            <label for="product">Product:</label>
            <input class="form-control" type="text" name="product"><br>
            
            <label for="unitPrice">Unit Price:</label>
            <input class="form-control" type="number" name="unitPrice" min="0" step="0.01"><br>
            
            <label for="discount">Discount:</label>
            <input class="form-control" type="number" name="discount" value="0"><br>
            
            <label for="quantity">Quantity:</label>
            <input class="form-control" type="number" name="quantity" min="1"><br>`;
        container.appendChild(newOrderDetail);
    }
</script>
</html>